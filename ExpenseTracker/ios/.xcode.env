# This `.xcode.env` file is versioned and is used to source the environment
# used when running script phases inside Xcode.
# To customize your local environment, you can create an `.xcode.env.local`
# file that is not versioned.

# NODE_BINARY variable contains the PATH to the node executable.
#
# Customize the NODE_BINARY variable here.
# For example, to use nvm with brew, add the following line
# . "$(brew --prefix nvm)/nvm.sh" --no-use
export NODE_BINARY=$(command -v node)

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
DEFAULT_ENV_FILE="${SCRIPT_DIR}/../.env"
LOCAL_ENV_FILE="${SCRIPT_DIR}/../.env.local"

load_env_file() {
  if [ -f "$1" ]; then
    # shellcheck source=/dev/null
    set -a
    . "$1"
    set +a
  fi
}

load_env_file "${DEFAULT_ENV_FILE}"
load_env_file "${LOCAL_ENV_FILE}"

if [ -n "${GOOGLE_OAUTH_REDIRECT_URI}" ]; then
  export GOOGLE_OAUTH_REDIRECT_SCHEME="${GOOGLE_OAUTH_REDIRECT_URI%%:*}"
fi
